<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÍµêÌöå MBTI ÏºÄÎØ∏ Ï≤¥ÌÅ¨</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üíï</text></svg>">
    <meta name="description" content="ÍµêÌöå Í≥µÎèôÏ≤¥Î•º ÏúÑÌïú MBTI ÏºÄÎØ∏ Ï≤¥ÌÅ¨ ÏÑúÎπÑÏä§">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // SVG ÏïÑÏù¥ÏΩò Ïª¥Ìè¨ÎÑåÌä∏Îì§
        function Heart({ className, onClick }) {
            return React.createElement('svg', {
                className: className,
                onClick: onClick,
                fill: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                d: "M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
            }));
        }

        function Settings({ className, onClick }) {
            return React.createElement('svg', {
                className: className,
                onClick: onClick,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('circle', { key: 'circle', cx: "12", cy: "12", r: "3" }),
                React.createElement('path', {
                    key: 'path',
                    d: "M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                })
        function HandHeart({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
            }));
        }

        function List({ className, onClick }) {
            return React.createElement('svg', {
                className: className,
                onClick: onClick,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('line', { key: 'line1', x1: "8", y1: "6", x2: "21", y2: "6" }),
                React.createElement('line', { key: 'line2', x1: "8", y1: "12", x2: "21", y2: "12" }),
                React.createElement('line', { key: 'line3', x1: "8", y1: "18", x2: "21", y2: "18" }),
                React.createElement('line', { key: 'line4', x1: "3", y1: "6", x2: "3.01", y2: "6" }),
                React.createElement('line', { key: 'line5', x1: "3", y1: "12", x2: "3.01", y2: "12" }),
                React.createElement('line', { key: 'line6', x1: "3", y1: "18", x2: "3.01", y2: "18" })
            ]);
        }

        function Download({ className, onClick }) {
            return React.createElement('svg', {
                className: className,
                onClick: onClick,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
            }));
        }

        function ArrowRight({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('line', { key: 'line', x1: "5", y1: "12", x2: "19", y2: "12" }),
                React.createElement('polyline', { key: 'polyline', points: "12,5 19,12 12,19" })
            ]);
        }

        function Star({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('polygon', {
                points: "12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"
            }));
        }

        function Sparkles({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M5 3l1.5 1.5L5 6 3.5 4.5 5 3zM19 17l1.5 1.5L19 20l-1.5-1.5L19 17zM7.5 7.5L9 9l-1.5 1.5L6 9l1.5-1.5zM16.5 16.5L18 18l-1.5 1.5L15 18l1.5-1.5z"
            }));
        }

        function MapPin({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('path', {
                    key: 'path1',
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                }),
                React.createElement('path', {
                    key: 'path2',
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    strokeWidth: 2,
                    d: "M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                })
            ]);
        }

        function BookOpen({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
            }));
        }

        function MessageCircle({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
            }));
        }

        function Users({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                strokeLinecap: "round",
                strokeLinejoin: "round",
                strokeWidth: 2,
                d: "M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a4 4 0 11-8 0 4 4 0 018 0z"
            }));
        }

        function BarChart({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('line', { key: 'x-axis', x1: "18", y1: "20", x2: "18", y2: "10" }),
                React.createElement('line', { key: 'y-axis', x1: "12", y1: "20", x2: "12", y2: "4" }),
                React.createElement('line', { key: 'bar1', x1: "6", y1: "20", x2: "6", y2: "14" })
            ]);
        }

        function TrendingUp({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('polyline', { key: 'line', points: "23,6 13.5,15.5 8.5,10.5 1,18" }),
                React.createElement('polyline', { key: 'arrow', points: "17,6 23,6 23,12" })
            ]);
        }

        function Crown({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "currentColor",
                viewBox: "0 0 24 24"
            }, React.createElement('path', {
                d: "M5 16L3 6l5.5 4L12 4l3.5 6L21 6l-2 10H5zM12 18v2h8v2H4v-2h8v-2h0z"
            }));
        }

        function Calendar({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('rect', { key: 'rect', x: "3", y: "4", width: "18", height: "18", rx: "2", ry: "2" }),
                React.createElement('line', { key: 'line1', x1: "16", y1: "2", x2: "16", y2: "6" }),
                React.createElement('line', { key: 'line2', x1: "8", y1: "2", x2: "8", y2: "6" }),
                React.createElement('line', { key: 'line3', x1: "3", y1: "10", x2: "21", y2: "10" })
            ]);
        }

        function Search({ className }) {
            return React.createElement('svg', {
                className: className,
                fill: "none",
                stroke: "currentColor",
                viewBox: "0 0 24 24"
            }, [
                React.createElement('circle', { key: 'circle', cx: "11", cy: "11", r: "8" }),
                React.createElement('path', { key: 'path', d: "m21 21-4.35-4.35" })
            ]);
        }

        // Î©îÏù∏ Ïï± Ïª¥Ìè¨ÎÑåÌä∏
        function MBTIChemistryChecker() {
            const [currentStep, setCurrentStep] = useState('input');
            const [person1, setPerson1] = useState({ name: '', mbti: '' });
            const [person2, setPerson2] = useState({ name: '', mbti: '' });
            const [result, setResult] = useState(null);
            const [testHistory, setTestHistory] = useState([]);
            const [showHistory, setShowHistory] = useState(false);
            const [showCelebration, setShowCelebration] = useState(false);
            const [showSettings, setShowSettings] = useState(false);
            const [showAdmin, setShowAdmin] = useState(false);
            const [adminPassword, setAdminPassword] = useState('');
            const [isAdmin, setIsAdmin] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');
            const [dateFilter, setDateFilter] = useState('all');
            const [googleSheetsUrl, setGoogleSheetsUrl] = useState('');

            const mbtiTypes = [
                'INTJ', 'INTP', 'ENTJ', 'ENTP',
                'INFJ', 'INFP', 'ENFJ', 'ENFP',
                'ISTJ', 'ISFJ', 'ESTJ', 'ESFJ',
                'ISTP', 'ISFP', 'ESTP', 'ESFP'
            ];

            // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú Í∏∞Î°ù Î∂àÎü¨Ïò§Í∏∞
            useEffect(function() {
                const savedHistory = JSON.parse(localStorage.getItem('mbtiChemistryHistory') || '[]');
                const savedUrl = localStorage.getItem('googleSheetsUrl') || '';
                setTestHistory(savedHistory);
                setGoogleSheetsUrl(savedUrl);
            }, []);

            // Google SheetsÏóê Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
            const saveToGoogleSheets = async function(data) {
                if (!googleSheetsUrl) return false;
                
                try {
                    await fetch(googleSheetsUrl, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            person1_name: data.person1.name,
                            person1_mbti: data.person1.mbti,
                            person2_name: data.person2.name,
                            person2_mbti: data.person2.mbti,
                            score: data.score,
                            date: data.date,
                            time: data.time,
                            timestamp: new Date().toISOString()
                        })
                    });
                    return true;
                } catch (error) {
                    console.log('Google Sheets Ï†ÄÏû• Ïã§Ìå®:', error);
                    return false;
                }
            // Í¥ÄÎ¶¨Ïûê Ïù∏Ï¶ù
            const handleAdminLogin = function() {
                if (adminPassword === 'admin2024' || adminPassword === 'ÍµêÌöåÍ¥ÄÎ¶¨Ïûê') {
                    setIsAdmin(true);
                    setShowAdmin(true);
                    setAdminPassword('');
                } else {
                    alert('Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä ÌãÄÎ†∏ÏäµÎãàÎã§.');
                    setAdminPassword('');
                }
            };

            // ÌÜµÍ≥Ñ Í≥ÑÏÇ∞ Ìï®ÏàòÎì§
            const getStats = function() {
                if (testHistory.length === 0) {
                    return {
                        totalTests: 0,
                        averageScore: 0,
                        topMBTI: '',
                        topCombo: '',
                        todayTests: 0,
                        weekTests: 0
                    };
                }

                const today = new Date().toLocaleDateString('ko-KR');
                const oneWeekAgo = new Date();
                oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);

                const todayTests = testHistory.filter(function(record) {
                    return record.date === today;
                }).length;

                const weekTests = testHistory.filter(function(record) {
                    const recordDate = new Date(record.date);
                    return recordDate >= oneWeekAgo;
                }).length;

                const totalScore = testHistory.reduce(function(sum, record) {
                    return sum + record.score;
                }, 0);

                const mbtiCount = {};
                const comboCount = {};

                testHistory.forEach(function(record) {
                    // MBTI Í∞úÎ≥Ñ Ïπ¥Ïö¥Ìä∏
                    mbtiCount[record.person1.mbti] = (mbtiCount[record.person1.mbti] || 0) + 1;
                    mbtiCount[record.person2.mbti] = (mbtiCount[record.person2.mbti] || 0) + 1;

                    // Ï°∞Ìï© Ïπ¥Ïö¥Ìä∏
                    const combo = [record.person1.mbti, record.person2.mbti].sort().join('-');
                    comboCount[combo] = (comboCount[combo] || 0) + 1;
                });

                const topMBTI = Object.keys(mbtiCount).reduce(function(a, b) {
                    return mbtiCount[a] > mbtiCount[b] ? a : b;
                }, '');

                const topCombo = Object.keys(comboCount).reduce(function(a, b) {
                    return comboCount[a] > comboCount[b] ? a : b;
                }, '');

                return {
                    totalTests: testHistory.length,
                    averageScore: Math.round(totalScore / testHistory.length),
                    topMBTI: topMBTI,
                    topCombo: topCombo,
                    todayTests: todayTests,
                    weekTests: weekTests,
                    mbtiDistribution: mbtiCount,
                    comboDistribution: comboCount
                };
            };

            // ÌïÑÌÑ∞ÎßÅÎêú Í∏∞Î°ù Í∞ÄÏ†∏Ïò§Í∏∞
            const getFilteredHistory = function() {
                let filtered = testHistory;

                // Í≤ÄÏÉâ ÌïÑÌÑ∞
                if (searchTerm) {
                    filtered = filtered.filter(function(record) {
                        return record.person1.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                               record.person2.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                               record.person1.mbti.toLowerCase().includes(searchTerm.toLowerCase()) ||
                               record.person2.mbti.toLowerCase().includes(searchTerm.toLowerCase());
                    });
                }

                // ÎÇ†Ïßú ÌïÑÌÑ∞
                if (dateFilter !== 'all') {
                    const today = new Date();
                    const filterDate = new Date();
                    
                    if (dateFilter === 'today') {
                        filtered = filtered.filter(function(record) {
                            return record.date === today.toLocaleDateString('ko-KR');
                        });
                    } else if (dateFilter === 'week') {
                        filterDate.setDate(filterDate.getDate() - 7);
                        filtered = filtered.filter(function(record) {
                            const recordDate = new Date(record.date);
                            return recordDate >= filterDate;
                        });
                    } else if (dateFilter === 'month') {
                        filterDate.setMonth(filterDate.getMonth() - 1);
                        filtered = filtered.filter(function(record) {
                            const recordDate = new Date(record.date);
                            return recordDate >= filterDate;
                        });
                    }
                }

                return filtered;
            };

            // Í∏∞Î°ù Ï†ÄÏû•ÌïòÍ∏∞
            const saveToHistory = async function(result) {
                const newRecord = {
                    id: Date.now(),
                    person1: person1,
                    person2: person2,
                    score: result.overall,
                    date: new Date().toLocaleDateString('ko-KR'),
                    time: new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })
                };
                
                // Î°úÏª¨ÏóêÎßå Ï†ÄÏû• (Í∞úÏù∏ Í∏∞Î°ù)
                const updatedHistory = [newRecord, ...testHistory].slice(0, 50);
                setTestHistory(updatedHistory);
                localStorage.setItem('mbtiChemistryHistory', JSON.stringify(updatedHistory));
                
                // Íµ¨Í∏ÄÏãúÌä∏ Ï†ÄÏû•ÏùÄ ÏÇ¨Ïö©ÏûêÍ∞Ä Î™ÖÏãúÏ†ÅÏúºÎ°ú ÎèôÏùòÌïú Í≤ΩÏö∞ÏóêÎßå
                const allowSharing = localStorage.getItem('allowDataSharing') === 'true';
                if (allowSharing && googleSheetsUrl) {
                    await saveToGoogleSheets(newRecord);
                }
            };

            // MBTI ÏºÄÎØ∏ Í≥ÑÏÇ∞ Î°úÏßÅ
            const calculateChemistry = function(mbti1, mbti2) {
                const compatibility = {
                    'ENFP-INFJ': 95, 'INFJ-ENFP': 95,
                    'ESFJ-ISFP': 90, 'ISFP-ESFJ': 90,
                    'ENTJ-INTP': 88, 'INTP-ENTJ': 88,
                    'ESTJ-ISFJ': 87, 'ISFJ-ESTJ': 87,
                    'ENFJ-ESTP': 75, 'ESTP-ENFJ': 75,
                    'INFP-ENFJ': 78, 'ENFJ-INFP': 78,
                    'ISTJ-ESFP': 72, 'ESFP-ISTJ': 72,
                    'ISTP-ENTJ': 74, 'ENTJ-ISTP': 74,
                    'INTJ-ESFP': 45, 'ESFP-INTJ': 45,
                    'INTP-ESFJ': 48, 'ESFJ-INTP': 48,
                    'ISFP-ESTJ': 50, 'ESTJ-ISFP': 50,
                    'ENTP-ISFJ': 52, 'ISFJ-ENTP': 52,
                };

                const key = mbti1 + '-' + mbti2;
                if (mbti1 === mbti2) return 85;
                if (compatibility[key]) return compatibility[key];
                
                let score = 50;
                if ((mbti1[0] === 'E' && mbti2[0] === 'I') || (mbti1[0] === 'I' && mbti2[0] === 'E')) score += 15;
                if (mbti1[1] === mbti2[1]) score += 10;
                if (mbti1[2] === mbti2[2]) score += 5;
                if (mbti1[3] === mbti2[3]) score += 10;
                
                return Math.min(score, 95);
            };

            const getDetailedScores = function(mbti1, mbti2) {
                const baseScore = calculateChemistry(mbti1, mbti2);
                return {
                    travel: Math.min(baseScore + Math.floor(Math.random() * 20) - 10, 100),
                    faith: Math.min(baseScore + Math.floor(Math.random() * 15) - 7, 100),
                    conversation: Math.min(baseScore + Math.floor(Math.random() * 25) - 12, 100),
                    teamwork: Math.min(baseScore + Math.floor(Math.random() * 20) - 10, 100),
                    service: Math.min(baseScore + Math.floor(Math.random() * 15) - 7, 100)
                };
            };

            const getChemistryMessage = function(mbti1, mbti2, score) {
                const messages = {
                    'ENFP-INFJ': "ÏôÄ! ÏòÅÍ∞êÏùÑ Ï£ºÍ≥†Î∞õÎäî ÌôòÏÉÅÏùò ÏºÄÎØ∏! ENFPÏùò Ï∞ΩÏùòÏ†Å ÏóêÎÑàÏßÄÏôÄ INFJÏùò ÍπäÏùÄ ÌÜµÏ∞∞Î†•Ïù¥ ÎßåÎÇòÎ©¥ Ï†ïÎßê ÌäπÎ≥ÑÌïú ÏùºÎì§Ïù¥ ÏùºÏñ¥ÎÇ† Í±∞ÏòàÏöî!",
                    'INFJ-ENFP': "ÏôÄ! ÏòÅÍ∞êÏùÑ Ï£ºÍ≥†Î∞õÎäî ÌôòÏÉÅÏùò ÏºÄÎØ∏! ENFPÏùò Ï∞ΩÏùòÏ†Å ÏóêÎÑàÏßÄÏôÄ INFJÏùò ÍπäÏùÄ ÌÜµÏ∞∞Î†•Ïù¥ ÎßåÎÇòÎ©¥ Ï†ïÎßê ÌäπÎ≥ÑÌïú ÏùºÎì§Ïù¥ ÏùºÏñ¥ÎÇ† Í±∞ÏòàÏöî!",
                    'ESFJ-ISFP': "Îî∞ÎúªÌï®Ïù¥ 2Î∞∞Í∞Ä ÎêòÎäî Ï°∞Ìï©! ESFJÏùò Î∞∞Î†§Ïã¨Í≥º ISFPÏùò ÏßÑÏ†ïÏÑ±Ïù¥ ÎßåÎÇò ÏÑúÎ°úÎ•º ÎçîÏö± ÎπõÎÇòÍ≤å Ìï¥Ï§Ñ Í±∞ÏòàÏöî.",
                    'ISFP-ESFJ': "Îî∞ÎúªÌï®Ïù¥ 2Î∞∞Í∞Ä ÎêòÎäî Ï°∞Ìï©! ESFJÏùò Î∞∞Î†§Ïã¨Í≥º ISFPÏùò ÏßÑÏ†ïÏÑ±Ïù¥ ÎßåÎÇò ÏÑúÎ°úÎ•º ÎçîÏö± ÎπõÎÇòÍ≤å Ìï¥Ï§Ñ Í±∞ÏòàÏöî!",
                    'ENTJ-INTP': "ÏôÑÎ≤ΩÌïú Î∏åÎ†àÏù∏ ÏΩ§ÎπÑ! ENTJÏùò Ï∂îÏßÑÎ†•Í≥º INTPÏùò ÏïÑÏù¥ÎîîÏñ¥Í∞Ä ÎßåÎÇòÎ©¥ Î∂àÍ∞ÄÎä•Ìïú Í≤å ÏóÜÏñ¥ Î≥¥Ïó¨Ïöî!",
                    'INTP-ENTJ': "ÏôÑÎ≤ΩÌïú Î∏åÎ†àÏù∏ ÏΩ§ÎπÑ! ENTJÏùò Ï∂îÏßÑÎ†•Í≥º INTPÏùò ÏïÑÏù¥ÎîîÏñ¥Í∞Ä ÎßåÎÇòÎ©¥ Î∂àÍ∞ÄÎä•Ìïú Í≤å ÏóÜÏñ¥ Î≥¥Ïó¨Ïöî!"
                };

                if (mbti1 === mbti2) {
                    return "Ï∞êÏπú Îê† ÌôïÎ•† 99%! Í∞ôÏùÄ MBTIÎÅºÎ¶¨Îäî ÏÑúÎ°úÎ•º ÎÑàÎ¨¥ Ïûò Ïù¥Ìï¥Ìï¥ÏÑú Í∏àÏÑ∏ Ìé∏ÏïàÌïú ÏÇ¨Ïù¥Í∞Ä Îê† Í≤É Í∞ôÏïÑÏöî!";
                }

                const key = mbti1 + '-' + mbti2;
                if (messages[key]) return messages[key];

                if (score >= 80) return "ÏôÄ! Ï†ïÎßê ÌôòÏÉÅÏùò ÏºÄÎØ∏ÎÑ§Ïöî! Ìï®ÍªòÌïòÎ©¥ ÏãúÎÑàÏßÄ Ìè≠Î∞úÌï† Í≤É Í∞ôÏïÑÏöî!";
                if (score >= 60) return "Ï¢ãÏùÄ ÏºÄÎØ∏ÏóêÏöî! Îçî ÏïåÏïÑÍ∞àÏàòÎ°ù ÏºÄÎØ∏Í∞Ä ÏóÖÎê† Í±∞ÏòàÏöî!";
                return "ÏºÄÎØ∏Î•º ÎßûÏ∂∞Í∞ÄÎäî Ïû¨ÎØ∏Í∞Ä ÏûàÎäî Í¥ÄÍ≥ÑÎÑ§Ïöî!";
            };

            const handleSubmit = function() {
                if (!person1.name || !person1.mbti || !person2.name || !person2.mbti) {
                    alert('Î™®Îì† Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                    return;
                }

                setCurrentStep('loading');
                
                setTimeout(function() {
                    const overallScore = calculateChemistry(person1.mbti, person2.mbti);
                    const message = getChemistryMessage(person1.mbti, person2.mbti, overallScore);
                    const detailedScores = getDetailedScores(person1.mbti, person2.mbti);
                    
                    const finalResult = {
                        overall: overallScore,
                        message: message,
                        detailed: detailedScores
                    };
                    
                    setResult(finalResult);
                    saveToHistory(finalResult);
                    
                    if (overallScore >= 90) {
                        setShowCelebration(true);
                        setTimeout(function() { setShowCelebration(false); }, 3000);
                    }
                    
                    setCurrentStep('result');
                }, 2000);
            };

            const resetTest = function() {
                setCurrentStep('input');
                setPerson1({ name: '', mbti: '' });
                setPerson2({ name: '', mbti: '' });
                setResult(null);
                setShowCelebration(false);
            };

            const getScoreColor = function(score) {
                if (score >= 80) return 'text-green-600';
                if (score >= 60) return 'text-blue-600';
                return 'text-orange-600';
            };

            const getScoreEmoji = function(score) {
                if (score >= 90) return 'üèÜ';
                if (score >= 80) return 'üî•';
                if (score >= 60) return '‚ú®';
                return 'üí´';
            };

            // CSV Îã§Ïö¥Î°úÎìú
            const downloadCSV = function() {
                if (testHistory.length === 0) {
                    alert('Îã§Ïö¥Î°úÎìúÌï† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
                    return;
                }

                const headers = ['ÎÇ†Ïßú', 'ÏãúÍ∞Ñ', 'Ï≤´Î≤àÏß∏ Ïù¥Î¶Ñ', 'Ï≤´Î≤àÏß∏ MBTI', 'ÎëêÎ≤àÏß∏ Ïù¥Î¶Ñ', 'ÎëêÎ≤àÏß∏ MBTI', 'ÏºÄÎØ∏ Ï†êÏàò'];
                const csvData = testHistory.map(function(record) {
                    return [
                        record.date, record.time, record.person1.name, record.person1.mbti,
                        record.person2.name, record.person2.mbti, record.score
                    ];
                });

                const csvContent = [headers].concat(csvData)
                    .map(function(row) {
                        return row.map(function(field) {
                            return '"' + field + '"';
                        }).join(',');
                    })
                    .join('\n');

                const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', 'MBTI_ÏºÄÎØ∏ÌÖåÏä§Ìä∏_Í∏∞Î°ù_' + new Date().toLocaleDateString('ko-KR') + '.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            // URL Ï†ÄÏû• Ìï®Ïàò
            const handleUrlSave = function(url) {
                setGoogleSheetsUrl(url);
                if (url) {
                    localStorage.setItem('googleSheetsUrl', url);
                } else {
                    localStorage.removeItem('googleSheetsUrl');
                }
            };

            // Í¥ÄÎ¶¨Ïûê ÎåÄÏãúÎ≥¥Îìú
            if (showAdmin && isAdmin) {
                const stats = getStats();
                const filteredHistory = getFilteredHistory();

                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-purple-50 to-indigo-50 p-4"
                }, React.createElement('div', {
                    className: "max-w-6xl mx-auto"
                }, [
                    // Ìó§Îçî
                    React.createElement('div', {
                        key: 'header',
                        className: "bg-white rounded-3xl shadow-xl p-6 mb-6"
                    }, [
                        React.createElement('div', {
                            key: 'title-section',
                            className: "flex items-center justify-between mb-6"
                        }, [
                            React.createElement('div', {
                                key: 'title',
                                className: "flex items-center"
                            }, [
                                React.createElement(Crown, { key: 'crown', className: "w-8 h-8 text-yellow-500 mr-3" }),
                                React.createElement('h1', { key: 'text', className: "text-3xl font-bold text-gray-800" }, 'Í¥ÄÎ¶¨Ïûê ÎåÄÏãúÎ≥¥Îìú')
                            ]),
                            React.createElement('button', {
                                key: 'logout',
                                onClick: function() { 
                                    setIsAdmin(false); 
                                    setShowAdmin(false); 
                                },
                                className: "bg-red-100 text-red-700 px-4 py-2 rounded-xl hover:bg-red-200 transition-all"
                            }, 'Î°úÍ∑∏ÏïÑÏõÉ')
                        ]),
                        
                        // ÌïÑÌÑ∞ ÏÑπÏÖò
                        React.createElement('div', {
                            key: 'filters',
                            className: "grid grid-cols-1 md:grid-cols-2 gap-4"
                        }, [
                            React.createElement('div', {
                                key: 'search',
                                className: "relative"
                            }, [
                                React.createElement(Search, { key: 'icon', className: "absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" }),
                                React.createElement('input', {
                                    key: 'input',
                                    type: 'text',
                                    placeholder: 'Ïù¥Î¶Ñ ÎòêÎäî MBTIÎ°ú Í≤ÄÏÉâ...',
                                    value: searchTerm,
                                    onChange: function(e) { setSearchTerm(e.target.value); },
                                    className: "w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-600 focus:outline-none"
                                })
                            ]),
                            React.createElement('select', {
                                key: 'date-filter',
                                value: dateFilter,
                                onChange: function(e) { setDateFilter(e.target.value); },
                                className: "w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-600 focus:outline-none"
                            }, [
                                React.createElement('option', { key: 'all', value: 'all' }, 'Ï†ÑÏ≤¥ Í∏∞Í∞Ñ'),
                                React.createElement('option', { key: 'today', value: 'today' }, 'Ïò§Îäò'),
                                React.createElement('option', { key: 'week', value: 'week' }, 'ÏµúÍ∑º 1Ï£ºÏùº'),
                                React.createElement('option', { key: 'month', value: 'month' }, 'ÏµúÍ∑º 1Í∞úÏõî')
                            ])
                        ])
                    ]),

                    // ÌÜµÍ≥Ñ Ïπ¥ÎìúÎì§
                    React.createElement('div', {
                        key: 'stats-grid',
                        className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6"
                    }, [
                        // Ï¥ù ÌÖåÏä§Ìä∏ Ïàò
                        React.createElement('div', {
                            key: 'total-tests',
                            className: "bg-white rounded-2xl shadow-lg p-6"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement('h3', { key: 'title', className: "font-semibold text-gray-700" }, 'Ï¥ù ÌÖåÏä§Ìä∏ Ïàò'),
                                React.createElement(BarChart, { key: 'icon', className: "w-6 h-6 text-blue-500" })
                            ]),
                            React.createElement('div', { key: 'number', className: "text-3xl font-bold text-blue-600" }, stats.totalTests),
                            React.createElement('p', { key: 'desc', className: "text-sm text-gray-500 mt-2" }, 'Ï†ÑÏ≤¥ ÏºÄÎØ∏ ÌÖåÏä§Ìä∏ ÌöüÏàò')
                        ]),

                        // ÌèâÍ∑† ÏºÄÎØ∏ Ï†êÏàò
                        React.createElement('div', {
                            key: 'avg-score',
                            className: "bg-white rounded-2xl shadow-lg p-6"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement('h3', { key: 'title', className: "font-semibold text-gray-700" }, 'ÌèâÍ∑† ÏºÄÎØ∏ Ï†êÏàò'),
                                React.createElement(TrendingUp, { key: 'icon', className: "w-6 h-6 text-green-500" })
                            ]),
                            React.createElement('div', { key: 'number', className: "text-3xl font-bold text-green-600" }, stats.averageScore + 'Ï†ê'),
                            React.createElement('p', { key: 'desc', className: "text-sm text-gray-500 mt-2" }, 'Ï†ÑÏ≤¥ ÌÖåÏä§Ìä∏ ÌèâÍ∑†')
                        ]),

                        // Ïù∏Í∏∞ MBTI
                        React.createElement('div', {
                            key: 'top-mbti',
                            className: "bg-white rounded-2xl shadow-lg p-6"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement('h3', { key: 'title', className: "font-semibold text-gray-700" }, 'ÏµúÎã§ Ï∞∏Ïó¨ MBTI'),
                                React.createElement(Star, { key: 'icon', className: "w-6 h-6 text-yellow-500" })
                            ]),
                            React.createElement('div', { key: 'number', className: "text-3xl font-bold text-yellow-600" }, stats.topMBTI || '-'),
                            React.createElement('p', { key: 'desc', className: "text-sm text-gray-500 mt-2" }, 'Í∞ÄÏû• ÎßéÏù¥ ÌÖåÏä§Ìä∏Ìïú Ïú†Ìòï')
                        ]),

                        // Ïò§Îäò ÌÖåÏä§Ìä∏
                        React.createElement('div', {
                            key: 'today-tests',
                            className: "bg-white rounded-2xl shadow-lg p-6"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement('h3', { key: 'title', className: "font-semibold text-gray-700" }, 'Ïò§Îäò ÌÖåÏä§Ìä∏'),
                                React.createElement(Calendar, { key: 'icon', className: "w-6 h-6 text-purple-500" })
                            ]),
                            React.createElement('div', { key: 'number', className: "text-3xl font-bold text-purple-600" }, stats.todayTests),
                            React.createElement('p', { key: 'desc', className: "text-sm text-gray-500 mt-2" }, 'Í∏àÏùº ÏßÑÌñâÎêú ÌÖåÏä§Ìä∏')
                        ]),

                        // ÏµúÍ≥† ÏºÄÎØ∏ Ï°∞Ìï©
                        React.createElement('div', {
                            key: 'top-combo',
                            className: "bg-white rounded-2xl shadow-lg p-6"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement('h3', { key: 'title', className: "font-semibold text-gray-700" }, 'Ïù∏Í∏∞ Ï°∞Ìï©'),
                                React.createElement(Heart, { key: 'icon', className: "w-6 h-6 text-red-500" })
                            ]),
                            React.createElement('div', { key: 'number', className: "text-xl font-bold text-red-600" }, stats.topCombo || '-'),
                            React.createElement('p', { key: 'desc', className: "text-sm text-gray-500 mt-2" }, 'Í∞ÄÏû• ÎßéÏù¥ ÌÖåÏä§Ìä∏Îêú Ï°∞Ìï©')
                        ]),

                        // Ïù¥Î≤à Ï£º ÌÖåÏä§Ìä∏
                        React.createElement('div', {
                            key: 'week-tests',
                            className: "bg-white rounded-2xl shadow-lg p-6"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center justify-between mb-4"
                            }, [
                                React.createElement('h3', { key: 'title', className: "font-semibold text-gray-700" }, 'Ïù¥Î≤à Ï£º ÌÖåÏä§Ìä∏'),
                                React.createElement(TrendingUp, { key: 'icon', className: "w-6 h-6 text-indigo-500" })
                            ]),
                            React.createElement('div', { key: 'number', className: "text-3xl font-bold text-indigo-600" }, stats.weekTests),
                            React.createElement('p', { key: 'desc', className: "text-sm text-gray-500 mt-2" }, 'ÏµúÍ∑º 7ÏùºÍ∞Ñ ÌÖåÏä§Ìä∏')
                        ])
                    ]),

                    // ÏÉÅÏÑ∏ Í∏∞Î°ù ÌÖåÏù¥Î∏î
                    React.createElement('div', {
                        key: 'records-table',
                        className: "bg-white rounded-3xl shadow-xl p-6"
                    }, [
                        React.createElement('div', {
                            key: 'table-header',
                            className: "flex items-center justify-between mb-6"
                        }, [
                            React.createElement('h2', { key: 'title', className: "text-2xl font-bold text-gray-800" }, 'ÏÉÅÏÑ∏ Í∏∞Î°ù'),
                            React.createElement('div', { key: 'count', className: "text-sm text-gray-500" }, 
                                'Ï¥ù ' + filteredHistory.length + 'Í∞ú Í∏∞Î°ù'
                            )
                        ]),
                        
                        filteredHistory.length === 0 
                            ? React.createElement('div', {
                                key: 'empty',
                                className: "text-center py-12 text-gray-500"
                            }, 'Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§.')
                            : React.createElement('div', {
                                key: 'table-wrapper',
                                className: "overflow-x-auto"
                            }, React.createElement('table', {
                                className: "w-full text-sm"
                            }, [
                                React.createElement('thead', { key: 'thead' }, React.createElement('tr', {
                                    className: "border-b-2 border-gray-200"
                                }, [
                                    React.createElement('th', { key: 'date', className: "text-left py-3 px-4 font-semibold text-gray-700" }, 'ÎÇ†Ïßú'),
                                    React.createElement('th', { key: 'time', className: "text-left py-3 px-4 font-semibold text-gray-700" }, 'ÏãúÍ∞Ñ'),
                                    React.createElement('th', { key: 'person1', className: "text-left py-3 px-4 font-semibold text-gray-700" }, 'Ï≤´ Î≤àÏß∏'),
                                    React.createElement('th', { key: 'person2', className: "text-left py-3 px-4 font-semibold text-gray-700" }, 'Îëê Î≤àÏß∏'),
                                    React.createElement('th', { key: 'score', className: "text-center py-3 px-4 font-semibold text-gray-700" }, 'ÏºÄÎØ∏ Ï†êÏàò')
                                ])),
                                React.createElement('tbody', { key: 'tbody' }, 
                                    filteredHistory.map(function(record, index) {
                                        return React.createElement('tr', {
                                            key: record.id,
                                            className: index % 2 === 0 ? "bg-gray-50" : "bg-white"
                                        }, [
                                            React.createElement('td', { key: 'date', className: "py-3 px-4" }, record.date),
                                            React.createElement('td', { key: 'time', className: "py-3 px-4" }, record.time),
                                            React.createElement('td', { key: 'person1', className: "py-3 px-4" }, 
                                                record.person1.name + ' (' + record.person1.mbti + ')'
                                            ),
                                            React.createElement('td', { key: 'person2', className: "py-3 px-4" }, 
                                                record.person2.name + ' (' + record.person2.mbti + ')'
                                            ),
                                            React.createElement('td', { key: 'score', className: "py-3 px-4 text-center" }, 
                                                React.createElement('span', {
                                                    className: 'font-bold ' + getScoreColor(record.score)
                                                }, record.score + 'Ï†ê ' + getScoreEmoji(record.score))
                                            )
                                        ]);
                                    })
                                )
                            ]))
                    ])
                ]));
            }
                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4"
                }, React.createElement('div', {
                    className: "max-w-md mx-auto"
                }, React.createElement('div', {
                    className: "bg-white rounded-3xl shadow-xl p-6"
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: "flex items-center justify-between mb-6"
                    }, [
                        React.createElement('h2', {
                            key: 'title',
                            className: "text-xl font-bold text-gray-800 flex items-center"
                        }, [
                            React.createElement(Settings, { key: 'icon', className: "w-6 h-6 mr-2" }),
                            'ÏÑ§Ï†ï'
                        ]),
                        React.createElement('button', {
                            key: 'close',
                            onClick: function() { setShowSettings(false); },
                            className: "text-gray-500 hover:text-gray-700 text-2xl"
                        }, '‚úï')
                    ]),
                    React.createElement('div', {
                        key: 'content',
                        className: "space-y-6"
                    }, [
                        React.createElement('div', { key: 'url-section' }, [
                            React.createElement('label', {
                                key: 'label',
                                className: "block text-sm font-medium text-gray-700 mb-2"
                            }, 'Google Sheets Ïó∞Îèô URL (ÏÑ†ÌÉùÏÇ¨Ìï≠)'),
                            React.createElement('input', {
                                key: 'input',
                                type: "url",
                                placeholder: "https://script.google.com/macros/s/.../exec",
                                value: googleSheetsUrl,
                                onChange: function(e) { handleUrlSave(e.target.value); },
                                className: "w-full p-3 border-2 border-gray-200 rounded-2xl focus:border-blue-600 focus:outline-none text-sm"
                            }),
                            React.createElement('p', {
                                key: 'desc',
                                className: "text-xs text-gray-500 mt-1"
                            }, 'ÏûÖÎ†•ÌïòÎ©¥ Íµ¨Í∏ÄÏãúÌä∏Ïóê ÏûêÎèôÏúºÎ°ú Í∏∞Î°ùÏù¥ Ï†ÄÏû•Îê©ÎãàÎã§'),
                            React.createElement('div', {
                                key: 'privacy-section',
                                className: "mt-4 p-3 bg-yellow-50 rounded-xl border border-yellow-200"
                            }, [
                                React.createElement('div', {
                                    key: 'checkbox-section',
                                    className: "flex items-start space-x-2"
                                }, [
                                    React.createElement('input', {
                                        key: 'checkbox',
                                        type: 'checkbox',
                                        id: 'allowSharing',
                                        checked: localStorage.getItem('allowDataSharing') === 'true',
                                        onChange: function(e) {
                                            if (e.target.checked) {
                                                localStorage.setItem('allowDataSharing', 'true');
                                            } else {
                                                localStorage.removeItem('allowDataSharing');
                                            }
                                        },
                                        className: "mt-1"
                                    }),
                                    React.createElement('label', {
                                        key: 'label',
                                        htmlFor: 'allowSharing',
                                        className: "text-xs text-gray-700 leading-relaxed cursor-pointer"
                                    }, 'üìä ÍµêÌöå ÌÜµÍ≥Ñ Î™©Ï†ÅÏúºÎ°ú ÎÇ¥ ÌÖåÏä§Ìä∏ Í≤∞Í≥ºÎ•º Íµ¨Í∏ÄÏãúÌä∏Ïóê Í≥µÏú†ÌïòÎäî Í≤ÉÏóê ÎèôÏùòÌï©ÎãàÎã§. (Ïù¥Î¶ÑÍ≥º MBTIÎßå Ï†ÄÏû•ÎêòÎ©∞, Ïñ∏Ï†úÎì† Ìï¥Ï†ú Í∞ÄÎä•)')
                                ])
                            ])
                        ]),
                        React.createElement('div', {
                            key: 'data-section',
                            className: "border-t pt-4"
                        }, [
                            React.createElement('h3', {
                                key: 'title',
                                className: "font-medium text-gray-700 mb-3"
                            }, 'Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨'),
                            React.createElement('div', {
                                key: 'buttons',
                                className: "space-y-3"
                            }, [
                                            <button
                                                onClick={downloadCSV}
                                                className="w-full bg-green-100 text-green-700 font-medium py-3 px-4 rounded-2xl hover:bg-green-200 transition-all flex items-center justify-center"
                                            >
                                                <Download className="w-4 h-4 mr-2" />
                                                CSV ÌååÏùºÎ°ú Îã§Ïö¥Î°úÎìú ({testHistory.length}Í∞ú Í∏∞Î°ù)
                                            </button>
                                            
                                            <button
                                                onClick={() => setShowAdmin(true)}
                                                className="w-full bg-purple-100 text-purple-700 font-medium py-3 px-4 rounded-2xl hover:bg-purple-200 transition-all flex items-center justify-center"
                                            >
                                                <Crown className="w-4 h-4 mr-2" />
                                                Í¥ÄÎ¶¨Ïûê ÎåÄÏãúÎ≥¥Îìú
                                            </button>
                                            
                                            <button
                                                onClick={() => {
                                                    if (confirm('Ï†ïÎßêÎ°ú Î™®Îì† Í∏∞Î°ùÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                                                        localStorage.removeItem('mbtiChemistryHistory');
                                                        setTestHistory([]);
                                                        alert('Î™®Îì† Í∏∞Î°ùÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
                                                    }
                                                }}
                                                className="w-full bg-red-100 text-red-700 font-medium py-3 px-4 rounded-2xl hover:bg-red-200 transition-all"
                                            >
                                                Î™®Îì† Í∏∞Î°ù ÏÇ≠Ï†ú
                                            </button>
                            ])
                        ])
                    ]),
                    React.createElement('button', {
                        key: 'done',
                        onClick: function() { setShowSettings(false); },
                        className: "w-full mt-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200"
                    }, 'ÏôÑÎ£å')
                ])));
            }

            // Í∏∞Î°ù Î≥¥Í∏∞ ÌôîÎ©¥
            if (showHistory) {
                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4"
                }, React.createElement('div', {
                    className: "max-w-md mx-auto"
                }, React.createElement('div', {
                    className: "bg-white rounded-3xl shadow-xl p-6"
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: "flex items-center justify-between mb-6"
                    }, [
                        React.createElement('h2', {
                            key: 'title',
                            className: "text-xl font-bold text-gray-800 flex items-center"
                        }, [
                            React.createElement(List, { key: 'icon', className: "w-6 h-6 mr-2" }),
                            'ÏºÄÎØ∏ ÌÖåÏä§Ìä∏ Í∏∞Î°ù'
                        ]),
                        React.createElement('div', {
                            key: 'buttons',
                            className: "flex space-x-2"
                        }, [
                            React.createElement('button', {
                                key: 'settings',
                                onClick: function() { setShowSettings(true); },
                                className: "p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100",
                                title: "ÏÑ§Ï†ï"
                            }, React.createElement(Settings, { className: "w-5 h-5" })),
                            React.createElement('button', {
                                key: 'close',
                                onClick: function() { setShowHistory(false); },
                                className: "text-gray-500 hover:text-gray-700 text-xl"
                            }, '‚úï')
                        ])
                    ]),
                    testHistory.length === 0 
                        ? React.createElement('div', {
                            key: 'empty',
                            className: "text-center py-8"
                        }, React.createElement('p', {
                            className: "text-gray-500"
                        }, 'ÏïÑÏßÅ ÌÖåÏä§Ìä∏ Í∏∞Î°ùÏù¥ ÏóÜÏñ¥Ïöî'))
                        : React.createElement('div', {
                            key: 'history',
                            className: "space-y-3 max-h-96 overflow-y-auto"
                        }, testHistory.map(function(record) {
                            return React.createElement('div', {
                                key: record.id,
                                className: "bg-gray-50 rounded-2xl p-4"
                            }, [
                                React.createElement('div', {
                                    key: 'main',
                                    className: "flex items-center justify-between mb-2"
                                }, [
                                    React.createElement('div', {
                                        key: 'names',
                                        className: "flex items-center space-x-2"
                                    }, [
                                        React.createElement('span', {
                                            key: 'name1',
                                            className: "font-medium text-blue-600"
                                        }, record.person1.name),
                                        React.createElement('span', {
                                            key: 'mbti1',
                                            className: "text-xs text-gray-500"
                                        }, '(' + record.person1.mbti + ')'),
                                        React.createElement(Heart, { key: 'heart', className: "w-4 h-4 text-red-500" }),
                                        React.createElement('span', {
                                            key: 'name2',
                                            className: "font-medium text-purple-600"
                                        }, record.person2.name),
                                        React.createElement('span', {
                                            key: 'mbti2',
                                            className: "text-xs text-gray-500"
                                        }, '(' + record.person2.mbti + ')')
                                    ]),
                                    React.createElement('span', {
                                        key: 'score',
                                        className: 'font-bold ' + getScoreColor(record.score)
                                    }, record.score + 'Ï†ê ' + getScoreEmoji(record.score))
                                ]),
                                React.createElement('div', {
                                    key: 'date',
                                    className: "text-xs text-gray-500"
                                }, record.date + ' ' + record.time)
                            ]);
                        })),
                    React.createElement('button', {
                        key: 'back',
                        onClick: function() { setShowHistory(false); },
                        className: "w-full mt-6 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200"
                    }, 'ÎèåÏïÑÍ∞ÄÍ∏∞')
                ])));
            }

            // Î°úÎî© ÌôîÎ©¥
            if (currentStep === 'loading') {
                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center p-4"
                }, React.createElement('div', {
                    className: "bg-white rounded-3xl shadow-xl p-8 max-w-md w-full text-center"
                }, [
                    React.createElement('div', {
                        key: 'spinner',
                        className: "animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mx-auto mb-6"
                    }),
                    React.createElement('h2', {
                        key: 'title',
                        className: "text-xl font-bold text-gray-800 mb-2"
                    }, 'ÏºÄÎØ∏ Î∂ÑÏÑù Ï§ë...'),
                    React.createElement('p', {
                        key: 'desc',
                        className: "text-gray-600"
                    }, 'Îëê Î∂ÑÏùò ÌäπÎ≥ÑÌïú ÏºÄÎØ∏Î•º ÌôïÏù∏ÌïòÍ≥† ÏûàÏñ¥Ïöî!')
                ]));
            }

            // Í≤∞Í≥º ÌôîÎ©¥ (Í∞ÑÏÜåÌôî)
            if (currentStep === 'result') {
                return React.createElement('div', {
                    className: "min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4"
                }, React.createElement('div', {
                    className: "max-w-md mx-auto"
                }, [
                    // Ï∂ïÌïò Ïò§Î≤ÑÎ†àÏù¥
                    showCelebration && React.createElement('div', {
                        key: 'celebration',
                        className: "fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"
                    }, React.createElement('div', {
                        className: "bg-white rounded-3xl p-8 max-w-sm mx-4 text-center animate-bounce"
                    }, [
                        React.createElement('div', { key: 'emoji1', className: "text-6xl mb-4" }, 'üéâ'),
                        React.createElement('div', { key: 'emoji2', className: "text-3xl mb-2" }, 'üèÜ'),
                        React.createElement('h2', { key: 'title', className: "text-2xl font-bold text-yellow-600 mb-2" }, 'ÌôòÏÉÅÏùò ÏºÄÎØ∏!'),
                        React.createElement('p', { key: 'desc', className: "text-gray-700 mb-4" }, '90Ï†ê Ïù¥ÏÉÅÏùò ÎÜÄÎùºÏö¥ Í∂ÅÌï©Ïù¥ÏóêÏöî!'),
                        React.createElement('div', {
                            key: 'stars',
                            className: "flex justify-center space-x-2"
                        }, [1, 2, 3, 4, 5].map(function(i) {
                            return React.createElement(Star, {
                                key: i,
                                className: "w-6 h-6 text-yellow-500 fill-current animate-pulse"
                            });
                        }))
                    ])),

                    // Î©îÏù∏ Í≤∞Í≥º
                    React.createElement('div', {
                        key: 'main-result',
                        className: "bg-white rounded-3xl shadow-xl p-6 mb-6"
                    }, [
                        React.createElement('div', {
                            key: 'header',
                            className: "text-center mb-6"
                        }, [
                            React.createElement('div', {
                                key: 'title-row',
                                className: "flex items-center justify-center mb-4"
                            }, [
                                React.createElement(Sparkles, { key: 'icon', className: "w-8 h-8 text-yellow-500 mr-2" }),
                                React.createElement('h1', { key: 'title', className: "text-2xl font-bold text-gray-800" }, 'ÏºÄÎØ∏ Î∂ÑÏÑù Í≤∞Í≥º'),
                                React.createElement('button', {
                                    key: 'history-btn',
                                    onClick: function() { setShowHistory(true); },
                                    className: "ml-4 p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100",
                                    title: "Í∏∞Î°ù Î≥¥Í∏∞"
                                }, React.createElement(List, { className: "w-5 h-5" }))
                            ]),
                            React.createElement('div', {
                                key: 'names',
                                className: "flex items-center justify-center space-x-2 mb-2"
                            }, [
                                React.createElement('span', { key: 'name1', className: "text-lg font-semibold text-blue-600" }, person1.name),
                                React.createElement('span', { key: 'mbti1', className: "text-sm text-gray-500" }, '(' + person1.mbti + ')'),
                                React.createElement(Heart, { key: 'heart', className: "w-5 h-5 text-red-500" }),
                                React.createElement('span', { key: 'name2', className: "text-lg font-semibold text-blue-600" }, person2.name),
                                React.createElement('span', { key: 'mbti2', className: "text-sm text-gray-500" }, '(' + person2.mbti + ')')
                            ])
                        ]),
                        React.createElement('div', {
                            key: 'score-section',
                            className: "text-center mb-6"
                        }, [
                            result.overall >= 90 && React.createElement('div', {
                                key: 'perfect',
                                className: "mb-4"
                            }, [
                                React.createElement('div', { key: 'emoji', className: "text-4xl mb-2" }, 'üéâüèÜüéâ'),
                                React.createElement('div', {
                                    key: 'badge',
                                    className: "bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-4 py-2 rounded-full inline-block text-sm font-bold"
                                }, 'PERFECT MATCH!')
                            ]),
                            React.createElement('div', {
                                key: 'score',
                                className: 'text-5xl font-bold ' + getScoreColor(result.overall) + ' mb-2'
                            }, result.overall + 'Ï†ê ' + getScoreEmoji(result.overall)),
                            React.createElement('div', {
                                key: 'progress-bg',
                                className: "w-full bg-gray-200 rounded-full h-3 mb-4"
                            }, React.createElement('div', {
                                className: "bg-gradient-to-r from-blue-600 to-purple-600 h-3 rounded-full transition-all duration-1000",
                                style: { width: result.overall + '%' }
                            })),
                            React.createElement('p', {
                                key: 'message',
                                className: "text-gray-700 leading-relaxed"
                            }, result.message)
                        ])
                    ]),

                    // ÏÑ∏Î∂Ä Ï†êÏàòÎì§
                    React.createElement('div', {
                        key: 'detailed-scores',
                        className: "space-y-4 mb-6"
                    }, [
                        { key: 'travel', icon: MapPin, label: 'Ïó¨Ìñâ ÎèôÎ∞òÏûê ÏºÄÎØ∏', color: 'from-green-500 to-emerald-600' },
                        { key: 'faith', icon: BookOpen, label: 'Ïã†Ïïô ÏÑ±Ïû• ÌååÌä∏ÎÑà ÏºÄÎØ∏', color: 'from-blue-500 to-indigo-600' },
                        { key: 'conversation', icon: MessageCircle, label: 'ÏùºÏÉÅ ÎåÄÌôî ÌååÌä∏ÎÑà ÏºÄÎØ∏', color: 'from-purple-500 to-pink-600' },
                        { key: 'teamwork', icon: Users, label: 'ÏÜåÍ∑∏Î£π ÌôúÎèô ÌååÌä∏ÎÑà ÏºÄÎØ∏', color: 'from-orange-500 to-red-600' },
                        { key: 'service', icon: HandHeart, label: 'Î¥âÏÇ¨ ÎèôÏó≠Ïûê ÏºÄÎØ∏', color: 'from-teal-500 to-cyan-600' }
                    ].map(function(item) {
                        return React.createElement('div', {
                            key: item.key,
                            className: "bg-white rounded-2xl shadow-lg p-4"
                        }, [
                            React.createElement('div', {
                                key: 'header',
                                className: "flex items-center justify-between mb-3"
                            }, [
                                React.createElement('div', {
                                    key: 'label-section',
                                    className: "flex items-center"
                                }, [
                                    React.createElement(item.icon, { key: 'icon', className: "w-5 h-5 text-gray-600 mr-2" }),
                                    React.createElement('span', { key: 'label', className: "font-medium text-gray-800" }, item.label)
                                ]),
                                React.createElement('span', {
                                    key: 'score',
                                    className: 'font-bold ' + getScoreColor(result.detailed[item.key])
                                }, result.detailed[item.key] + 'Ï†ê')
                            ]),
                            React.createElement('div', {
                                key: 'progress-bg',
                                className: "w-full bg-gray-200 rounded-full h-2"
                            }, React.createElement('div', {
                                className: 'bg-gradient-to-r ' + item.color + ' h-2 rounded-full transition-all duration-1000',
                                style: { width: result.detailed[item.key] + '%' }
                            }))
                        ]);
                    })),

                    // Ïï°ÏÖò Î≤ÑÌäºÎì§
                    React.createElement('div', {
                        key: 'actions',
                        className: "flex space-x-3"
                    }, [
                        React.createElement('button', {
                            key: 'reset',
                            onClick: resetTest,
                            className: "flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg"
                        }, 'Îã§Ïãú ÌÖåÏä§Ìä∏ÌïòÍ∏∞'),
                        React.createElement('button', {
                            key: 'share',
                            onClick: function() {
                                const text = person1.name + '(' + person1.mbti + ')ÎãòÍ≥º ' + person2.name + '(' + person2.mbti + ')ÎãòÏùò ÏºÄÎØ∏Îäî ' + result.overall + 'Ï†ê! üî•';
                                if (navigator.share) {
                                    navigator.share({
                                        title: 'MBTI ÏºÄÎØ∏ Ï≤¥ÌÅ¨ Í≤∞Í≥º',
                                        text: text
                                    });
                                } else {
                                    navigator.clipboard.writeText(text);
                                    alert('Í≤∞Í≥ºÍ∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!');
                                }
                            },
                            className: "bg-white border-2 border-blue-600 text-blue-600 font-bold py-3 px-6 rounded-2xl hover:bg-blue-50 transition-all duration-200 shadow-lg"
                        }, 'Í≥µÏú†ÌïòÍ∏∞')
                    ])
                ]));
            }

            // Î©îÏù∏ ÏûÖÎ†• ÌôîÎ©¥
            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4"
            }, React.createElement('div', {
                className: "max-w-md mx-auto"
            }, [
                // Ìó§Îçî
                React.createElement('div', {
                    key: 'header',
                    className: "text-center mb-8 pt-8"
                }, [
                    React.createElement('div', {
                        key: 'title-row',
                        className: "flex items-center justify-center mb-4"
                    }, [
                        React.createElement(Heart, { key: 'heart', className: "w-8 h-8 text-red-500 mr-2" }),
                        React.createElement('h1', { key: 'title', className: "text-3xl font-bold text-gray-800" }, 'MBTI ÏºÄÎØ∏ Ï≤¥ÌÅ¨'),
                        React.createElement('div', {
                            key: 'buttons',
                            className: "flex ml-4 space-x-2"
                        }, [
                            React.createElement('button', {
                                key: 'history',
                                onClick: function() { setShowHistory(true); },
                                className: "p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-white hover:shadow-md transition-all cursor-pointer",
                                title: "Í∏∞Î°ù Î≥¥Í∏∞"
                            }, React.createElement(List, { className: "w-6 h-6" })),
                            React.createElement('button', {
                                key: 'settings',
                                onClick: function() { setShowSettings(true); },
                                className: "p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-white hover:shadow-md transition-all cursor-pointer",
                                title: "ÏÑ§Ï†ï"
                            }, React.createElement(Settings, { className: "w-6 h-6" }))
                        ])
                    ]),
                    React.createElement('p', { key: 'desc', className: "text-gray-600" }, 'Îëê ÏÇ¨ÎûåÏùò ÌäπÎ≥ÑÌïú ÏºÄÎØ∏Î•º ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî!'),
                    testHistory.length > 0 && React.createElement('p', {
                        key: 'count',
                        className: "text-sm text-blue-600 mt-2"
                    }, 'üíæ ' + testHistory.length + 'Í∞úÏùò ÌÖåÏä§Ìä∏ Í∏∞Î°ùÏù¥ ÏûàÏñ¥Ïöî')
                ]),

                // ÏûÖÎ†• Ìèº
                React.createElement('div', {
                    key: 'form',
                    className: "bg-white rounded-3xl shadow-xl p-6 mb-6"
                }, [
                    // Ï≤´ Î≤àÏß∏ ÏÇ¨Îûå
                    React.createElement('div', {
                        key: 'person1',
                        className: "mb-6"
                    }, [
                        React.createElement('h3', {
                            key: 'title',
                            className: "text-lg font-semibold text-gray-800 mb-4 flex items-center"
                        }, [
                            React.createElement('span', {
                                key: 'badge',
                                className: "bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2"
                            }, '1'),
                            'Ï≤´ Î≤àÏß∏ Î∂Ñ'
                        ]),
                        React.createElement('div', {
                            key: 'inputs',
                            className: "space-y-4"
                        }, [
                            React.createElement('input', {
                                key: 'name',
                                type: "text",
                                placeholder: "Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî",
                                value: person1.name,
                                onChange: function(e) { setPerson1({ name: e.target.value, mbti: person1.mbti }); },
                                className: "w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-blue-600 focus:outline-none transition-colors"
                            }),
                            React.createElement('select', {
                                key: 'mbti',
                                value: person1.mbti,
                                onChange: function(e) { setPerson1({ name: person1.name, mbti: e.target.value }); },
                                className: "w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-blue-600 focus:outline-none transition-colors"
                            }, [
                                React.createElement('option', { key: 'default', value: "" }, 'MBTI Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî')
                            ].concat(mbtiTypes.map(function(type) {
                                return React.createElement('option', { key: type, value: type }, type);
                            })))
                        ])
                    ]),

                    // Îëê Î≤àÏß∏ ÏÇ¨Îûå
                    React.createElement('div', {
                        key: 'person2',
                        className: "mb-6"
                    }, [
                        React.createElement('h3', {
                            key: 'title',
                            className: "text-lg font-semibold text-gray-800 mb-4 flex items-center"
                        }, [
                            React.createElement('span', {
                                key: 'badge',
                                className: "bg-purple-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2"
                            }, '2'),
                            'Îëê Î≤àÏß∏ Î∂Ñ'
                        ]),
                        React.createElement('div', {
                            key: 'inputs',
                            className: "space-y-4"
                        }, [
                            React.createElement('input', {
                                key: 'name',
                                type: "text",
                                placeholder: "Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî",
                                value: person2.name,
                                onChange: function(e) { setPerson2({ name: e.target.value, mbti: person2.mbti }); },
                                className: "w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-purple-600 focus:outline-none transition-colors"
                            }),
                            React.createElement('select', {
                                key: 'mbti',
                                value: person2.mbti,
                                onChange: function(e) { setPerson2({ name: person2.name, mbti: e.target.value }); },
                                className: "w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-purple-600 focus:outline-none transition-colors"
                            }, [
                                React.createElement('option', { key: 'default', value: "" }, 'MBTI Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî')
                            ].concat(mbtiTypes.map(function(type) {
                                return React.createElement('option', { key: type, value: type }, type);
                            })))
                        ])
                    ]),

                    React.createElement('button', {
                        key: 'submit',
                        onClick: handleSubmit,
                        className: "w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-4 px-6 rounded-2xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg flex items-center justify-center cursor-pointer"
                    }, [
                        'ÏºÄÎØ∏ ÌôïÏù∏ÌïòÍ∏∞',
                        React.createElement(ArrowRight, { key: 'arrow', className: "w-5 h-5 ml-2" })
                    ])
                ]),

                // ÏÑ§Î™Ö
                React.createElement('div', {
                    key: 'description',
                    className: "bg-white/70 backdrop-blur-sm rounded-2xl p-4 text-center"
                }, React.createElement('p', {
                    className: "text-sm text-gray-600"
                }, [
                    'üéØ 5Í∞ú ÏòÅÏó≠Î≥Ñ ÏÑ∏Î∂Ä ÏºÄÎØ∏ Î∂ÑÏÑù',
                    React.createElement('br', { key: 'br1' }),
                    'üí´ MBTI Ï°∞Ìï©Î≥Ñ ÎßûÏ∂§ Î©îÏãúÏßÄ',
                    React.createElement('br', { key: 'br2' }),
                    'üíù ÍµêÌöå Í≥µÎèôÏ≤¥Î•º ÏúÑÌïú ÌäπÎ≥ÑÌïú ÏºÄÎØ∏ Ï≤¥ÌÅ¨'
                ]))
            ]));
        }

        // Ïï± Î†åÎçîÎßÅ
        ReactDOM.render(React.createElement(MBTIChemistryChecker), document.getElementById('root'));
    </script>
</body>
</html>
